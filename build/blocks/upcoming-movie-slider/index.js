(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};window.wp.i18n;const t=window.wp.blocks,r=JSON.parse('{"UU":"anam-gutenberg-starter-block/upcoming-movie-slider"}');function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}const c=window.regeneratorRuntime;var l=e.n(c);window.React,window.wp.data;const u=window.wp.blockEditor,d=window.wp.components,h=window.wp.element,p=window.ReactJSXRuntime;function g(e){var t=e.props,r=t.attributes,n=t.setAttributes,o=a((0,h.useState)(!1),2),i=(o[0],o[1],a((0,h.useState)(!1),2)),s=(i[0],i[1],a((0,h.useState)(),2)),c=(s[0],s[1],a((0,h.useState)(new Date),2)),l=(c[0],c[1],function(){return(0,p.jsx)(d.GradientPicker,{value:r.cardGradient,onChange:function(e){return n({cardGradient:e})},gradients:[{name:"Black White",gradient:"linear-gradient(180deg,rgba(255, 255, 255, 0) 0%,rgba(0, 0, 0, 0.6) 100%)",slug:"jshine"},{name:"Moonlit Asteroid",gradient:"linear-gradient(180deg,#0F202700 0%, #2c5364 100%)",slug:"moonlit-asteroid"},{name:"Rastafarie",gradient:"linear-gradient(180deg,#1E960000 0%, #FFF200 0%, #FF0000 100%)",slug:"rastafari"}]})});return(0,p.jsxs)("div",{children:[(0,p.jsxs)(u.InspectorControls,{children:[(0,p.jsx)(d.Panel,{children:(0,p.jsx)(d.PanelBody,{initialOpen:!0,title:"Block Structure",children:(0,p.jsx)(d.SelectControl,{label:"Choose Column",value:r.movieColumn,options:[{label:"Column 2",value:2},{label:"Column 3",value:3},{label:"Column 4",value:4}],onChange:function(e){n({movieColumn:+e})}})})}),(0,p.jsx)(d.Panel,{children:(0,p.jsxs)(d.PanelBody,{initialOpen:!0,title:"Meta Information",children:[(0,p.jsx)(d.CheckboxControl,{label:"Description",help:"Show description of the movie in the card.",checked:r.showDescription,onChange:function(e){n({showDescription:e})}}),(0,p.jsx)(d.CheckboxControl,{label:"Genre",help:"Show genre of the movie in the card.",checked:r.showGenre,onChange:function(e){n({showGenre:e})}}),(0,p.jsx)(d.CheckboxControl,{label:"Language",help:"Show Language of the movie in the card.",checked:r.showLanguage,onChange:function(e){n({showLanguage:e})}}),(0,p.jsx)(d.CheckboxControl,{label:"Release Date",help:"Show release date of the movie in the card.",checked:r.showReleaseDate,onChange:function(e){n({showReleaseDate:e})}}),(0,p.jsx)(d.CheckboxControl,{label:"Vote Count",help:"Show vote count of the movie in the card.",checked:r.showVoteCount,onChange:function(e){n({showVoteCount:e})}}),(0,p.jsx)(d.CheckboxControl,{label:"Vote Average",help:"Show vote average of the movie in the card.",checked:r.showVoteAverage,onChange:function(e){n({showVoteAverage:e})}})]})})]}),(0,p.jsx)(u.InspectorControls,{group:"styles",children:(0,p.jsx)(d.Panel,{children:(0,p.jsx)(d.PanelBody,{initialOpen:!0,title:"Gradient",children:(0,p.jsx)(l,{})})})})]})}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){var e,t=(e=l().mark((function e(){var t,r,n,o,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",r={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI5NDQxMzQ5MmRiNWUyZTRjYTVlOTM0MDJjYTYyM2ZjYSIsIm5iZiI6MTcxOTIwNzU0OC45NzY5OCwic3ViIjoiNjY3OTA0YWNlZmRiOGMxNzc0MGI1MmZkIiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.3LtMcOLpN8GfR8UiFDFPUYYHJVft69TrEzPssuTqnBA"}},e.next=4,fetch(t,r);case 4:return n=e.sent,e.next=7,n.json();case 7:if(!1!==(o=e.sent).success){e.next=10;break}throw new Error(o.status_message);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=function(e){var t=e.genreIDArr,r=e.attributes.genres.filter((function(e){return t.includes(e.id)}));return(0,p.jsx)("ul",{children:r.map((function(e){return(0,p.jsx)("li",{children:e.name},e.id)}))})},j=function(e){var t,r,n,o,i=e.movie,a=e.attributes;return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card__image",children:[(0,p.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(i.poster_path),alt:i.title}),(0,p.jsxs)("div",{className:"rating-point",children:[a.showVoteAverage&&(0,p.jsx)("span",{className:"vote-point",children:(n=i.vote_average,o=Math.pow(10,1),Math.round(n*o)/o)}),a.showVoteCount&&(0,p.jsx)("span",{className:"vote-count",children:i.vote_count})]}),(0,p.jsxs)("div",{className:"language-and-yeaer",children:[a.showLanguage&&(0,p.jsx)("span",{className:"language",children:i.original_language}),a.showReleaseDate&&(0,p.jsx)("span",{className:"year",children:(t=i.release_date,r=Date.parse(t),new Date(r).getFullYear())})]})]}),(0,p.jsx)("div",{className:"card__header",children:(0,p.jsx)("h2",{children:i.title})}),a.showDescription&&(0,p.jsx)("div",{className:"card__body",children:(0,p.jsx)("p",{children:i.overview})}),(0,p.jsx)("div",{className:"card__footer",children:a.showGenre&&(0,p.jsx)("div",{className:"genre",children:(0,p.jsx)(b,{genreIDArr:i.genre_ids,attributes:a})})})]})};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){var t=e.genreIDArr,r=e.attributes.genres.filter((function(e){return t.includes(e.id)}));return(0,p.jsx)("ul",{children:r.map((function(e){return(0,p.jsx)("li",{children:e.name},e.id)}))})},O=function(e){var t,r,n,o,i=e.movie,a=e.attributes;return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card__image",children:[(0,p.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(i.poster_path),alt:i.title}),(0,p.jsxs)("div",{className:"rating-point",children:[a.showVoteAverage&&(0,p.jsx)("span",{className:"vote-point",children:(n=i.vote_average,o=Math.pow(10,1),Math.round(n*o)/o)}),a.showVoteCount&&(0,p.jsx)("span",{className:"vote-count",children:i.vote_count})]}),(0,p.jsxs)("div",{className:"language-and-yeaer",children:[a.showLanguage&&(0,p.jsx)("span",{className:"language",children:i.original_language}),a.showReleaseDate&&(0,p.jsx)("span",{className:"year",children:(t=i.release_date,r=Date.parse(t),new Date(r).getFullYear())})]})]}),(0,p.jsx)("div",{className:"card__header",children:(0,p.jsx)("h2",{children:i.title})}),a.showDescription&&(0,p.jsx)("div",{className:"card__body",children:(0,p.jsx)("p",{children:i.overview})}),(0,p.jsx)("div",{className:"card__footer",children:a.showGenre&&(0,p.jsx)("div",{className:"genre",children:(0,p.jsx)(x,{genreIDArr:i.genre_ids,attributes:a})})})]})};(0,t.registerBlockType)(r.UU,{edit:function(e){var t=(0,u.useBlockProps)(),r=e.attributes,n=e.setAttributes,o=a((0,h.useState)(!1),2),i=(o[0],o[1],a((0,h.useState)([]),2)),s=i[0],c=i[1];return(0,h.useEffect)((function(){if(r.genres.length<1&&m("https://api.themoviedb.org/3/genre/movie/list?language=en").then((function(e){console.log("res",e),n({genres:e.genres})})).catch((function(e){return console.log("genre err",e)})),r.fetchedMovies.length>0){var e=r.fetchedMovies.slice(0,10);c(e)}r.fetchedMovies.length<1&&m("https://api.themoviedb.org/3/movie/upcoming?language=en-US&page=1").then((function(e){console.log("res",e),c(e.results),n({fetchedMovies:e.results})})).catch((function(e){return console.log("err",e)})),console.log("hello useeffect"),console.log("hello useeffect",s),jQuery(document).ready((function(e){console.log(document.querySelector(".upcoming-movie-list")),e(".upcoming-movie-list").slick({arrows:!0,dots:!0,autoplay:!0,slidesToShow:3,slidesToScroll:3,autoplaySpeed:3e3,responsive:[{breakpoint:1300,settings:{arrows:!1}}]})}))}),[]),(0,p.jsxs)("div",v(v({},t),{},{children:[(0,p.jsx)(g,{props:e}),(0,p.jsx)("div",{className:"upcoming-movie-list",children:s&&s.map((function(e){return(0,p.jsx)(j,{movie:e,attributes:r},e.id)}))})]}))},save:function(e){var t=e.attributes,r=u.useBlockProps.save(),n=t.fetchedMovies,o=[];return n.length>0&&(o=n.slice(0,10)),(0,p.jsx)("div",y(y({},r),{},{children:(0,p.jsx)("div",{className:"upcoming-movie-list",children:o&&o.map((function(e){return(0,p.jsx)(O,{movie:e,attributes:t},e.id)}))})}))}})})();